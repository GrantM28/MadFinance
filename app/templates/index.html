<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Finance Strategy Engine</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="container py-5">

<h2 class="mb-5 fw-bold">Debt Strategy Dashboard</h2>

<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="stat-card">
            <div class="metric-label">Monthly Income</div>
            <div class="metric-value text-info">${{ "%.0f"|format(summary.income) }}</div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="stat-card">
            <div class="metric-label">Total Debt</div>
            <div class="metric-value text-danger">${{ "%.0f"|format(summary.balance) }}</div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="stat-card">
            <div class="metric-label">Free Cashflow</div>
            <div class="metric-value text-success">${{ "%.0f"|format(summary.cashflow) }}</div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="stat-card">
            <div class="metric-label">DTI</div>
            <div class="metric-value">{{ "%.1f"|format(summary.dti) }}%</div>
        </div>
    </div>
</div>

<div class="row g-4 mb-4">
    <div class="col-md-6">
        <div class="stat-card">
            <div class="metric-label">Avalanche Payoff</div>
            <div class="metric-value">{{ summary.ava_months }} months</div>
            <small>Interest: ${{ "%.0f"|format(summary.ava_interest) }}</small>
        </div>
    </div>

    <div class="col-md-6">
        <div class="stat-card">
            <div class="metric-label">Snowball Payoff</div>
            <div class="metric-value">{{ summary.snow_months }} months</div>
            <small>Interest: ${{ "%.0f"|format(summary.snow_interest) }}</small>
        </div>
    </div>
</div>

<div class="mb-4">
    <form action="/set_extra" method="POST" class="d-flex gap-2">
        <input type="number" step="0.01" name="extra" class="form-control" placeholder="Extra Monthly Debt Payment">
        <button class="btn btn-primary">Apply Strategy</button>
    </form>
</div>

<h4>Debts</h4>
<table class="table table-dark">
<thead>
<tr><th>Name</th><th>Balance</th><th>APR</th><th>Min</th><th></th></tr>
</thead>
<tbody>
{% for d in debts %}
<tr>
<td>{{ d.name }}</td>
<td>${{ "%.0f"|format(d.balance) }}</td>
<td>{{ d.interest_rate }}%</td>
<td>${{ d.min_payment }}</td>
<td><a href="/delete_debt/{{ d.id }}" class="btn btn-sm btn-danger">Delete</a></td>
</tr>
{% endfor %}
</tbody>
</table>

<form action="/add_debt" method="POST" class="row g-2">
<input name="name" class="form-control" placeholder="Name">
<input name="balance" class="form-control" placeholder="Balance">
<input name="apr" class="form-control" placeholder="APR">
<input name="min_pay" class="form-control" placeholder="Min Payment">
<button class="btn btn-primary">Add Debt</button>
</form>

</body>
</html>
